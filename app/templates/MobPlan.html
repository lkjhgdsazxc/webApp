{% extends "base.html" %}
{% import 'bootstrap/wtf.html' as wtf %}


           {% block content %}
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                <ul class=flashes>
                {% for message in messages %}
                  <div class="alert alert-primary" role="alert">
                    {{ message }}
                  </div>
                {% endfor %}
                </ul>
              {% endif %}
            {% endwith %}


<script src="https://netdna.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
<div class="container">
<div class="row">
  <!-- BEGIN SEARCH RESULT -->
  <div class="col-md-12">
    <div class="grid search">
      <div class="grid-body">
        <div class="row">
          <!-- BEGIN FILTERS -->
          <div class="col-md-3">
            <h2 class="grid-title"><i class="fa fa-filter"></i> Filters</h2>
            <hr>
            
            <!-- BEGIN FILTER BY CATEGORY -->
            <form action="" method="post" autocompleted="off">
            <h4>By category:</h4>
            <div class="dropdown">
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                {% for Categorys in group2 %}
                <a class="dropdown-item" href="#">{{Categorys.Category}}</a>
                {% endfor %}
              </div>
              <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                {% for imgs in group3 %}
                <a class="dropdown-item" href="#">{{imgs.govimg}}</a>
                {% endfor %}
              </div>
            </div>
            <select id="searchbar1" name="searchbar1" class="form-control">
              <option selected="selected"></option>
              {% for Categorys in group2 %}
              <option value={{Categorys.Category}}>{{Categorys.Category}}</option>
              {% endfor %}
            </select>
            <h4>By District:</h4>
            <select id="searchbar2" name="searchbar2" class="form-control">
              <option selected="selected"></option>
              {% for Districts in group %}
              <option value={{Districts.District}}>{{Districts.District}}</option>
              {% endfor %}
            </select>
            <!-- END FILTER BY CATEGORY -->
            
            <div class="padding"></div>
            
          </div>
          <!-- END FILTERS -->
          <!-- BEGIN RESULT -->
          <div class="col-md-9">
            <h2><i class="fa fa-file-o"></i> Result</h2>
            <hr>
            <!-- BEGIN SEARCH INPUT -->

            <div class="input-group">
              <input id="searchbar" name="searchbar" type="text" class="form-control" placeholder="Enter any key word">
              <span class="input-group-btn">
                <input class="btn btn-primary" value="Search" type="submit" name=""><i class="fa fa-search"></i></input>
              </span>
            </div>
            </form>

            
            <div class="padding"></div>
            
            <div class="row">
              <!-- BEGIN ORDER RESULT -->
              <div class="col-sm-6">
                <div class="btn-group">
                  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                    Order by <span class="caret"></span>
                  </button>
                  <ul class="dropdown-menu" role="menu">
                    <li><a href="#">Name</a></li>
                    <li><a href="#">Date</a></li>
                    <li><a href="#">View</a></li>
                    <li><a href="#">Rating</a></li>
                  </ul>
                </div>
              </div>
              <!-- END ORDER RESULT -->
              
              <div class="col-md-6 text-right">
                <div class="btn-group">
                  <button type="button" class="btn btn-default active"><i class="fa fa-list"></i></button>
                  <button type="button" class="btn btn-default"><i class="fa fa-th"></i></button>
                </div>
              </div>
            </div>
            
            <!-- BEGIN TABLE RESULT -->
            <div class="table-responsive bootstrap-iso">
              <table class="table table-hover">

                <tbody>
                {% for govlists in govlist.items %}
                <tr class='click2book' data-id='{{ govlists.govid }}' data-bs-toggle="modal" data-bs-target="#empModal">
                  <td class="number text-center">{{ govlists.govid }}</td>
                  <td class="image"><img src="{{ govlists.govimg }}" alt=""></td>
                  <td class="product"><strong>{{ govlists.Venue_Name }}</strong><br>{{ govlists.Address }}</td>
                  <td><form action="/Like" method="post" class="TESTCOLL"><button type="submit" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hand-thumbs-up-fill" viewBox="0 0 16 16">
                          <path d="M6.956 1.745C7.021.81 7.908.087 8.864.325l.261.066c.463.116.874.456 1.012.965.22.816.533 2.511.062 4.51a9.84 9.84 0 0 1 .443-.051c.713-.065 1.669-.072 2.516.21.518.173.994.681 1.2 1.273.184.532.16 1.162-.234 1.733.058.119.103.242.138.363.077.27.113.567.113.856 0 .289-.036.586-.113.856-.039.135-.09.273-.16.404.169.387.107.819-.003 1.148a3.163 3.163 0 0 1-.488.901c.054.152.076.312.076.465 0 .305-.089.625-.253.912C13.1 15.522 12.437 16 11.5 16H8c-.605 0-1.07-.081-1.466-.218a4.82 4.82 0 0 1-.97-.484l-.048-.03c-.504-.307-.999-.609-2.068-.722C2.682 14.464 2 13.846 2 13V9c0-.85.685-1.432 1.357-1.615.849-.232 1.574-.787 2.132-1.41.56-.627.914-1.28 1.039-1.639.199-.575.356-1.539.428-2.59z"></path>
                        </svg>
                        {{ govlists.Likes }}
                      </button>
                      <input type="hidden" id="TESTCOLL" name="TESTCOLL" value="{{ govlists.govid }}"/>
                       </form>
                  </td>
                  <td><form action="/collection" method="post" class="TESTCOLL"><button type="submit" class="btn btn-secondary" href="/collection">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-heart" viewBox="0 0 16 16">
                        <path d="m8 2.748-.717-.737C5.6.281 2.514.878 1.4 3.053c-.523 1.023-.641 2.5.314 4.385.92 1.815 2.834 3.989 6.286 6.357 3.452-2.368 5.365-4.542 6.286-6.357.955-1.886.838-3.362.314-4.385C13.486.878 10.4.28 8.717 2.01L8 2.748zM8 15C-7.333 4.868 3.279-3.04 7.824 1.143c.06.055.119.112.176.171a3.12 3.12 0 0 1 .176-.17C12.72-3.042 23.333 4.867 8 15z"></path>
                    </svg>
                  </button>
                  <input type="hidden" id="TESTCOLL" name="TESTCOLL" value="{{ govlists.govid }}"/>
                  </form>
                  </td>
                </tr>
                {% endfor %}
              </tbody></table>
            </div>
            <!-- END TABLE RESULT -->

            <!-- BEGIN PAGINATION -->
   <nav aria-label="Page navigation example">
                <ul class="pagination">
                    {% if govlist.has_prev %}
                      <li class="page-item"> <a class="page-link" href="{{ url_for('main.Mobplanlist', page=govlist.prev_num) }}">Previous</a></li>
                    {% else %}
                      <li class="page-item"><a class="page-link btn disabled" href="#">Previous</a></li>
                    {% endif %}
      
                   {% for page in govlist.iter_pages(left_edge=3, right_edge=3) %}
                   {% if page %}
                    
                    {% if page==govlist.page %}
                     <li class="page-item active"><a class="page-link" href="{{ url_for('main.Mobplanlist', page=page) }}">{{ page }}</a></li>
                    {% else %}
                     <li class="page-item"><a class="page-link" href="{{ url_for('main.Mobplanlist', page=page) }}">{{ page }}</a></li>
                    {% endif %}
                     
                     {% else %}
                      <li class="page-item disabled" id="example_ellipsis"><a href="#" class="page-link">…</a></li> 
                     {% endif %}
                     {% endfor %}
 
                    {% if govlist.has_next %}
                      <li class="page-item"> <a class="page-link" href="{{ url_for('main.Mobplanlist', page=govlist.next_num) }}">Next</a></li>
                    {% else %}
                      <li class="page-item"><a class="page-link btn disabled" href="#">Next</a></li>
                    {% endif %}
 
                </ul>
    </nav>
            <!-- END PAGINATION -->
          </div>
          <!-- END RESULT -->
        </div>
      </div>
    </div>
  </div>
  <!-- END SEARCH RESULT -->
</div>
</div>

<style type="text/css">
body{margin-top:20px;
background:#eee;
}

.btn {
    margin-bottom: 5px;
}

.grid {
    position: relative;
    width: 100%;
    background: #fff;
    color: #666666;
    border-radius: 2px;
    margin-bottom: 25px;
    box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.1);
}

.grid .grid-body {
    padding: 15px 20px 15px 20px;
    font-size: 0.9em;
    line-height: 1.9em;
}

.search table tr td.rate {
    color: #f39c12;
    line-height: 25px;
}

.search table tr:hover {
    cursor: pointer;
}

.search table tr td.image {
	width: 50px;
}

.search table tr td img {
	width: 50px;
	height: 50px;
}

.search table tr td.rate {
	color: #f39c12;
	line-height: 25px;
}

.search table tr td.price {
	font-size: 1.5em;
	line-height: 50px;
}

.search #price1,
.search #price2 {
	display: inline;
	font-weight: 600;
}
</style>


            </div>
        </div>    
    </div>    
    </div>
</div>    

<script type='text/javascript'>
$(document).ready(function(){
    $('.click2book').click(function(){
        var govid = $(this).data('id');
        $.ajax({
            url: '/booking',
            type: 'post',
            data: {govid: govid},
            success: function(data){ 
                $('.modal-body').html(data); 
                $('.modal-body').append(data.htmlresponse);
                $('#empModal').modal('toggle'); 
            }
        });
    });
});
</script>
            
        </div>



          <div class="modal" id="empModal" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="F">
                <div class="modal-dialog modal-xl" >
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Booking</h4>
                          <button type="button" class="close" data-dismiss="modal">×</button>
                        </div>
                        <div class="modal-body">
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
        </div>
        
        
        <div class="modal" id="empModal2" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="F">
                <div class="modal-dialog modal-xl" >
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">Summary</h4>
                          <button type="button" class="close" data-dismiss="modal">×</button>
                        </div>
                        <div class="modal-body">
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
        </div>


        

{% endblock %}
